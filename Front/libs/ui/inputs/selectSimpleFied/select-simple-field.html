<div class="relative w-full min-w-[200px]">
  @if (title) {
    <label class="block mb-1 text-sm font-medium text-gray-700">{{ title }}</label>
  }
  @if (error) {
    <p class="mt-1 text-xs text-red-600">{{ error }}</p>
  }
  <div
    class="flex justify-between items-center px-4 py-2.5 border border-gray-300 rounded-lg bg-white cursor-pointer hover:border-gray-500 transition-colors"
    (click)="toggleOpen()"
    [attr.aria-disabled]="isDisabled">
    <span class="text-gray-700">
      @if (value) {
        @if (paramData.length && value && typeof value === 'object') {
          @for (key of paramData; track key) {
            {{ value[key] }}&nbsp;
          }
        } @else {
          {{ value }}
        }
      } @else {
        Sélectionner...
      }
    </span>
    <span class="text-xs transition-transform duration-200" [class.rotate-180]="isOpen">▼</span>
  </div>

  @if (isOpen) {
    <ul class="absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg max-h-52 overflow-y-auto z-50 shadow-lg">
      <li
        class="px-4 py-2.5 cursor-pointer hover:bg-gray-100 transition-colors first:rounded-t-lg last:rounded-b-lg"
        [class.bg-blue-100]="equals(value, null)"
        [class.font-medium]="equals(value, null)"
        (click)="selectNone()">
        None
      </li>

      @for (item of (listField.length ? listField : data); track item) {
        <li
          class="px-4 py-2.5 cursor-pointer hover:bg-gray-100 transition-colors first:rounded-t-lg last:rounded-b-lg"
          [class.bg-blue-100]="equals(value, item)"
          [class.font-medium]="equals(value, item)"
          (click)="selectItem(item)">
          @if (paramData.length && item && typeof item === 'object') {
            @for (key of paramData; track key) {
              {{ item }}&nbsp;
            }
          } @else {
            {{ item }}
          }
        </li>
      }
    </ul>
  }

  
</div>